↓List_directory [steps.ListDirStep-1606914033385]: 
  sourceDirectory: context.getProjectDirectory()+ "/templates/en"
↓List_directory1 [steps.ListDirStep-1606914626234]: 
  sourceDirectory: context.getProjectDirectory()+ "/templates/fr"
↓Complex [steps.XMLComplexStep-1606915088708]: 
  nodeName: templates
  ↓Iterator_EN [steps.IteratorStep-1606914985884]: 
    sourceDefinition: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
        - com.twinsoft.convertigo.beans.common.XMLVector: 
          - java.lang.String: 
            - ↑value: 1606914033385
          - java.lang.String: 
            - ↑value: ./file
    ↓Element [steps.XMLElementStep-1606915265888]: 
      nodeName: item
      sourceDefinition: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: 1606914985884
            - java.lang.String: 
              - ↑value: ./text()
      ↓Attribute [steps.XMLAttributeStep-1606916216538]: 
        nodeName: lang
        nodeText: en
  ↓Iterator_FR [steps.IteratorStep-1606916150266]: 
    sourceDefinition: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
        - com.twinsoft.convertigo.beans.common.XMLVector: 
          - java.lang.String: 
            - ↑value: 1606914626234
          - java.lang.String: 
            - ↑value: ./file
    ↓Element [steps.XMLElementStep-1606916150269]: 
      nodeName: item
      sourceDefinition: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: 1606916150266
            - java.lang.String: 
              - ↑value: ./text()
      ↓Attribute [steps.XMLAttributeStep-1606916201026]: 
        nodeName: lang
        nodeText: fr
↓Iterator [steps.IteratorStep-1606915463497]: 
  sourceDefinition: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - java.lang.String: 
          - ↑value: 1606915088708
        - java.lang.String: 
          - ↑value: ./item
  ↓jSimpleSource [steps.SimpleSourceStep-1606916448699]: 
    sourceDefinition: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
        - com.twinsoft.convertigo.beans.common.XMLVector: 
          - java.lang.String: 
            - ↑value: 1606915463497
          - java.lang.String: 
            - ↑value: ./@lang
    variableName: lang
  ↓jSimpleSource1 [steps.SimpleSourceStep-1606916588417]: 
    sourceDefinition: 
      - xmlizable: 
        - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
        - com.twinsoft.convertigo.beans.common.XMLVector: 
          - java.lang.String: 
            - ↑value: 1606915463497
          - java.lang.String: 
            - ↑value: ./text()
    variableName: name
  ↓Sequence_JS_ReadFile [steps.SimpleStep-1606916357552]: 
    expression: |
      'var File = use("java.io.File");
      var Scanner = use("java.util.Scanner");
      //log.warn("name is: "+ name + " lang is: "+lang);
      
      //Define var isWindows to detect unix like system or not
      var isWindows = org.apache.commons.lang3.SystemUtils.IS_OS_WINDOWS;
      // Define separator switch os
      var separator = isWindows ? "\\" :"/";
      //building path to file
      var root = context.getProjectDirectory()+ separator+"templates"+separator+lang+separator
      // get file
      var file = new File(root+name);
      var myReader = new Scanner(file, "UTF-8");
      var dataS = "";
      while (myReader.hasNextLine()) {
          dataS += myReader.nextLine();
      }
      var form = JSON.parse(dataS+"");
      log.warn("form name is "+ form.name);
      log.warn("form acl is "+ form["~c8oAcl"]);
      // delete some properties
      delete form._rev;
      delete form["~c8oAcl"];
      delete form._id;
      delete form.creator;
      delete form.c8o_view_type_published_form;
      delete form.c8o_view_type_drafts_form;
      
      // add type template
      form.lang = lang;
      form.c8o_view_type_template = true;
      // get assets
      var b64Wallpaper = undefined;
      var b64Thumbnail = undefined;
      var keyPrefix = "base64,";
      if(form.wallpaper.b64 != undefined){
      	var i = form.wallpaper.b64.indexOf(keyPrefix);
      	if(i != -1){
      		form.wallpaper.b64  = form.wallpaper.b64.substring(i+ keyPrefix.length);
      	}
      	b64Wallpaper = form.wallpaper.b64;
      	delete form.wallpaper.b64;
      }
      if(form.thumbnail != undefined && form.thumbnail.b64 != undefined){
      	var i = form.thumbnail.b64.indexOf(keyPrefix);
      	if(i != -1){
      		form.thumbnail.b64  = form.thumbnail.b64.substring(i+ keyPrefix.length);
      	}
      	b64Thumbnail = form.thumbnail.b64;
      	delete form.thumbnail.b64;
      }
      form._id = "template_"+lang+"_"+name;
      
      '
  ↓jElement [steps.ElementStep-1606922293821]: 
    expression: JSON.stringify(form)
    nodeName: jsonbase
    output: false
  ↓jElement1 [steps.ElementStep-1606925214452]: 
    expression: form._id
    nodeName: formID
  ↓jElement2 [steps.ElementStep-1606925254970]: 
    expression: b64Wallpaper
    nodeName: b64Wallpaper
    output: false
  ↓jElement21 [steps.ElementStep-1606925272132]: 
    expression: b64Thumbnail
    nodeName: b64Thumbnail
    output: false
  ↓Call_Transaction [steps.TransactionStep-1606922234577]: 
    sourceTransaction: C8Oforms.c8oforms_fs.PostDocumentPublicFormJSONbase
    ↓_use_json_base [variables.StepVariable-1606922245379]: 
      description: (string) – JSON use as a base for the document (js object). Optional
      sourceDefinition: 
        - xmlizable: 
          - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
          - com.twinsoft.convertigo.beans.common.XMLVector: 
            - java.lang.String: 
              - ↑value: 1606922293821
            - java.lang.String: 
              - ↑value: ./text()
  ↓jIf [steps.IfStep-1606924345535]: 
    condition: b64Wallpaper != undefined
    ↓Call_Transaction1 [steps.TransactionStep-1606924225474]: 
      sourceTransaction: C8Oforms.c8oforms_fs.PutDocumentAttachmentFromBase64
      ↓_use_attname [variables.StepVariable-1606925099130]: 
        description: Attachment name
        value: wallpaper
      ↓_use_docid [variables.StepVariable-1606925099132]: 
        description: Document ID
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1606925214452
              - java.lang.String: 
                - ↑value: ./text()
      ↓_use_attbase64 [variables.StepVariable-1606925099134]: 
        description: Attachment base64 encoded  The value is converted from a base64 string to a binary content. Used if attpath parameter is blank or if the file doesn't exist.
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1606925254970
              - java.lang.String: 
                - ↑value: ./text()
  ↓jIf1 [steps.IfStep-1606925302345]: 
    condition: b64Thumbnail != undefined
    ↓Call_Transaction1 [steps.TransactionStep-1606925302348]: 
      sourceTransaction: C8Oforms.c8oforms_fs.PutDocumentAttachmentFromBase64
      ↓_use_attname [variables.StepVariable-1606925302351]: 
        description: Attachment name
        value: thumbnail
      ↓_use_docid [variables.StepVariable-1606925302354]: 
        description: Document ID
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1606925214452
              - java.lang.String: 
                - ↑value: ./text()
      ↓_use_attbase64 [variables.StepVariable-1606925302357]: 
        description: Attachment base64 encoded  The value is converted from a base64 string to a binary content. Used if attpath parameter is blank or if the file doesn't exist.
        sourceDefinition: 
          - xmlizable: 
            - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
            - com.twinsoft.convertigo.beans.common.XMLVector: 
              - java.lang.String: 
                - ↑value: 1606925272132
              - java.lang.String: 
                - ↑value: ./text()