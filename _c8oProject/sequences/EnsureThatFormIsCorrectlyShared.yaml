↓Element [steps.XMLElementStep-1632273583170]: 
  comment: DO NOT MOVE OR RENAME (USED IN SEQUENCE_JS1)
  nodeName: item
↓Call_Transaction [steps.TransactionStep-1632270828989]: 
  sourceTransaction: C8Oforms.c8oforms_fs.GetView
  ↓_use_ddoc [variables.StepVariable-1632270843967]: 
    description: Design document name
    value: formsV2
  ↓_use_view [variables.StepVariable-1632270843969]: 
    description: View function name
    value: all_search
↓jSource1 [steps.SourceStep-1632270933316]: 
  sourceDefinition: 
    - xmlizable: 
      - ↑classname: com.twinsoft.convertigo.beans.common.XMLVector
      - com.twinsoft.convertigo.beans.common.XMLVector: 
        - java.lang.String: 
          - ↑value: 1632270828989
        - java.lang.String: 
          - ↑value: ./document/couchdb_output/rows
  variableName: formsEditions
↓Sequence_Compute_Forms_Edition [steps.SimpleStep-1632270975358]: 
  expression: |
    '// compute forms edition docs with groups
    var jDoc = (JSON.parse(''''+com.twinsoft.convertigo.engine.util.XMLUtils.XmlToJson(formsEditions.item(0), true, true))).rows.item;
    var doc = [];
    log.warn("jdocLEN " + jDoc.length)
    //converting jdoc to array
    if(jDoc != undefined && jDoc != "undefined"){
    	if(jDoc instanceof Array == false){
    		jDoc = [jDoc];
    	}
    	jDoc.forEach((elem)=>{
    		var groups = {};
    		var currentDoc = elem.value.doc;
    		
    		// add each coolabResp to response groups
    		if(currentDoc.collabsResponse != undefined){
    			currentDoc.collabsResponse.forEach((collabResp)=>{
    				log.warn("thereIS "+collabResp)
    			groups[collabResp] = true;
    		});
    		}
    		
    		// add creator  to response groups
    		groups[elem.creator] = true;
    		doc.push({"id":currentDoc._id, groups :groups})
    	});
    	
    	var xmlUtils = use("com.twinsoft.convertigo.engine.util.XMLUtils");
    	var jsonObject = new org.codehaus.jettison.json.JSONArray(JSON.stringify(doc));
    	xmlUtils.jsonToXml(jsonObject, dom.getDocumentElement().item(1));
    	
    	// call sequence mannual 
    	var __project = java.lang.reflect.Array.newInstance(java.lang.String, 1);
    	__project[0] = "C8Oforms"
    	var __sequence = "AddGroupsToAwnsers"
    	
    	var parameters = new java.util.HashMap();
    	parameters.put("__project", __project);
    	parameters.put("__context", "syncContext_EnsureThatFormIsCorrectlyShared_" + java.lang.System.currentTimeMillis());
    	parameters.put("__sequence", __sequence);
    	parameters.put("doc", dom.getDocumentElement().item(1));
    	
    	var request = new com.twinsoft.convertigo.engine.requesters.InternalHttpServletRequest(context.httpServletRequest);
    	var requester = new com.twinsoft.convertigo.engine.requesters.InternalRequester(parameters, request);
    	requester.processRequest();
    	log.debug("EnsureThatFormIsCorrectlyShared: after processRequest");
    	var ctx = requester.getContext();
    	com.twinsoft.convertigo.engine.Engine.theApp.contextManager.remove(ctx);
    	log.debug("EnsureThatFormIsCorrectlyShared: after remove ctx:" + ctx.contextID);
    	
    }
    else{
    	log.warn("They are not any existing edition forms, we will do nothing.\nThis log can be normal");
    }'
  isEnabled: false