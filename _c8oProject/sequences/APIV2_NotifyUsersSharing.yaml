↓notifyUsersSharing [steps.SimpleStep-1729002489837]: 
  expression: |
    '// Imports and helpers functions
    include("js/email.js");
    include("js/common.js");
    
    
    let loglevel = "warn";
    let authenticatedUserID = context.getAuthenticatedUser();
    try{
       meta = JSON.parse(meta);
    }
    catch(e){
       meta = {};
    }
    
    if(authenticatedUserID != null && authenticatedUserID != ""){
    	var userGrp = [];
    	for(var grp of meta.group){
    		var doc = (callSequence("lib_FullSyncGrp", "UsersOf", { group: grp})).document;
    		if(doc.user != null){
    			if(!(doc.user instanceof Array)){
    				doc.user = [doc.user]
    			}
    			for(var user of doc.user){
    				userGrp.push(user);
    			}
    		}
    	}
    	console.log(''response userGrp'', userGrp, loglevel);
    	
    	query = new java.util.HashMap();
    	keys = toJettison(userGrp);
    	var listOfUsers = toJSON(fsclient.postView("c8oforms_fs", ''usersV2'', ''byACL'', query, keys)).rows;
    	console.log(''response listOfUsers'', listOfUsers, loglevel);
    	for(var user of listOfUsers){
    		var mail = user.value.mail;
    		sendMail(("TO:" + mail + ";"), meta.subject, ".//emails/responseMail2.xsl", "", meta.body, "C8Oforms" ,[]);
    	}
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    	
    //	console.log("meta", meta, loglevel);
    //	let data = {
    //		_id: "folder_"+meta.title+"_"+authenticatedUserID,
    //		tag: [meta.title],
    //		"~c8oAcl": authenticatedUserID
    //	}
    //	if(meta.published){
    //		data.c8o_view_type_published_folder = true;
    //	}
    //	else{
    //		data.c8o_view_type_drafts_folder = true;
    //	}
    //	// post doc 
    //	doc = toJSON(fsclient.postDocument(java.lang.String("c8oforms_fs"), toJettison(data), new HashMap(), enums.CouchPostDocumentPolicy.merge, new HashMap(), false));
    	
    }
    '
↓meta [variables.RequestableVariable-1729002494559]: 
↓smtpServer [variables.RequestableVariable-1729008900077]: 
  value: ${lib.actions.c8oforms.smtp.server}
↓smtpPassword [variables.RequestableVariable-1729008900080]: 
  value: ${lib.actions.c8oforms.smtp.password.secret}
↓smtpUsername [variables.RequestableVariable-1729008900083]: 
  value: ${lib.actions.c8oforms.smtp.user}
↓smtpPort [variables.RequestableVariable-1729008900086]: 
  value: ${lib.actions.c8oforms.smtp.port}
↓sSender [variables.RequestableVariable-1729008900089]: 
  value: ${lib.actions.c8oforms.smtp.sender}
↓smtpAuthType [variables.RequestableVariable-1729008900092]: 
  value: ${lib.actions.c8oforms.smtp.security}
↓xslFilepath [variables.RequestableVariable-1729008900095]: 
  value: ${lib.actions.c8oforms.email.xslFilePath=.//emails/responseMail2.xsl}
↓sslProtocols [variables.RequestableVariable-1729008900098]: 
  value: ${lib.actions.c8oforms.smtp.sslProtocols=TLSv1.2}